import{r as l}from"./index-B8v4ui00.js";import{I as k,R as $}from"./context-pRJcWO9r.js";import{g as A,a as F}from"./i18nInstance-DtMpzgZE.js";(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[e]="22264a5e-59dd-4a87-8aee-c747b69d8fbd",n._sentryDebugIdIdentifier="sentry-dbid-22264a5e-59dd-4a87-8aee-c747b69d8fbd")}catch{}})();function M(){if(console&&console.warn){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];typeof e[0]=="string"&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const T={};function I(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];typeof e[0]=="string"&&T[e[0]]||(typeof e[0]=="string"&&(T[e[0]]=new Date),M(...e))}const R=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}};function S(n,e,t){n.loadNamespaces(e,R(n,t))}function v(n,e,t,s){typeof t=="string"&&(t=[t]),t.forEach(i=>{n.options.ns.indexOf(i)<0&&n.options.ns.push(i)}),n.loadLanguages(e,R(n,s))}function P(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=e.languages[0],i=e.options?e.options.fallbackLng:!1,o=e.languages[e.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const f=(w,m)=>{const r=e.services.backendConnector.state[`${w}|${m}`];return r===-1||r===2};return t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!f(e.isLanguageChangingTo,n)?!1:!!(e.hasResourceBundle(s,n)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||f(s,n)&&(!i||f(o,n)))}function j(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(I("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(n,{lng:t.lng,precheck:(i,o)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!o(i.isLanguageChangingTo,n))return!1}}):P(n,e,t)}const B=(n,e)=>{const t=l.useRef();return l.useEffect(()=>{t.current=e?t.current:n},[n,e]),t.current};function E(n,e,t,s){return n.getFixedT(e,t,s)}function J(n,e,t,s){return l.useCallback(E(n,e,t,s),[n,e,t,s])}function G(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:t}=e,{i18n:s,defaultNS:i}=l.useContext(k)||{},o=t||s||F();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new $),!o){I("You will need to pass in an i18next instance by using initReactI18next");const a=(d,u)=>typeof u=="string"?u:u&&typeof u=="object"&&typeof u.defaultValue=="string"?u.defaultValue:Array.isArray(d)?d[d.length-1]:d,c=[a,{},!1];return c.t=a,c.i18n={},c.ready=!1,c}o.options.react&&o.options.react.wait!==void 0&&I("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const f={...A(),...o.options.react,...e},{useSuspense:w,keyPrefix:m}=f;let r=n||i||o.options&&o.options.defaultNS;r=typeof r=="string"?[r]:r||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(r);const g=(o.isInitialized||o.initializedStoreOnce)&&r.every(a=>j(a,o,f)),z=J(o,e.lng||null,f.nsMode==="fallback"?r:r[0],m),C=()=>z,N=()=>E(o,e.lng||null,f.nsMode==="fallback"?r:r[0],m),[x,b]=l.useState(C);let y=r.join();e.lng&&(y=`${e.lng}${y}`);const L=B(y),p=l.useRef(!0);l.useEffect(()=>{const{bindI18n:a,bindI18nStore:c}=f;p.current=!0,!g&&!w&&(e.lng?v(o,e.lng,r,()=>{p.current&&b(N)}):S(o,r,()=>{p.current&&b(N)})),g&&L&&L!==y&&p.current&&b(N);function d(){p.current&&b(N)}return a&&o&&o.on(a,d),c&&o&&o.store.on(c,d),()=>{p.current=!1,a&&o&&a.split(" ").forEach(u=>o.off(u,d)),c&&o&&c.split(" ").forEach(u=>o.store.off(u,d))}},[o,y]),l.useEffect(()=>{p.current&&g&&b(C)},[o,m,g]);const h=[x,o,g];if(h.t=x,h.i18n=o,h.ready=g,g||!g&&!w)return h;throw new Promise(a=>{e.lng?v(o,e.lng,r,()=>a()):S(o,r,()=>a())})}export{G as u};
